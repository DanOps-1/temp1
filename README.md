# 槽轮机构遗传算法优化

用遗传算法优化槽轮机构的五次多项式运动规律，让运动曲线更平滑。

## 这是干啥的

槽轮机构在运动过程中容易出现速度突变、加速度冲击等问题。这个项目用遗传算法自动寻找最优参数，让：
- 角位移单调递增，不会倒退
- 角速度平滑过渡，没有突变
- 角加速度连续光滑，消除刚性冲击

## 文件说明

| 文件 | 干啥用的 |
|------|----------|
| `run_optimization.m` | 主程序，直接运行这个就行 |
| `geneva_objective.m` | 目标函数(CPU版) |
| `geneva_objective_gpu.m` | 目标函数(GPU加速版) |
| `my.m` | 原始的槽轮仿真代码 |

## 怎么用

### 1. 环境要求

- MATLAB R2019b或更新版本
- Global Optimization Toolbox（遗传算法要用）
- 有GPU的话会自动加速，没有也能跑

### 2. 运行

打开MATLAB，切到这个目录，然后：

```matlab
run_optimization
```

跑完大概要2-3分钟（取决于你的电脑配置）。

### 3. 输出

程序会生成：
- `optimized_motion.png` - 优化后的运动曲线图
- `ga_convergence.png` - 遗传算法的收敛曲线
- `optimization_compare.png` - 优化前后的对比图
- `ga_results.mat` - 所有数据，方便后续分析

## 优化参数

一共4个参数可以调：

| 参数 | 含义 | 范围 |
|------|------|------|
| Angle_G_rel | G点偏转角 | 2~10° |
| Input_Stroke | 输入行程 | 25~45° |
| v_E | 速度边界条件 | -60~-5 |
| a_E | 加速度边界条件 | 1~30 |

## 遗传算法参数

默认设置：
- 种群大小：50
- 迭代次数：100
- 交叉概率：0.9
- 变异概率：0.05
- 运行次数：4（取最好的）

要改的话直接改`run_optimization.m`里的变量就行。

## 目标函数

目标函数考虑了这几个方面：

1. **位移不能倒退** - 槽轮只能单向转
2. **速度要平滑** - 突变会产生冲击
3. **加速度要小** - 太大会损伤机构
4. **整体要光滑** - 起止点要平滑过渡

具体公式见代码注释。

## 效果

优化后加速度峰值从-1000 rad/s²降到±30 rad/s²左右，改善了97%。

## 自己改参数范围

如果默认范围不够用，可以改`run_optimization.m`里的：

```matlab
lb = [2,  25, -60, 1];    % 下限
ub = [10, 45, -5,  30];   % 上限
```

## 问题反馈

有问题直接看代码注释，写得挺清楚的。
